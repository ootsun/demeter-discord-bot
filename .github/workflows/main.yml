name: Main workflow - deploy latest
run-name: ${{ github.event.head_commit.author }} - ${{ github.event.head_commit.message }}
on: 
  push:
    branches:
      - master
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: ssh-scp-ssh-pipelines
        uses: cross-the-world/ssh-scp-ssh-pipelines@v1.1.4
        env:
          ssh_host: ${{ secrets.SSH_HOST }}
          ssh_user: ${{ secrets.SSH_USER }}
          ssh_password: ${{ secrets.SSH_PASSWORD }}
        with:
          host: $ssh_host
          user: $ssh_user
          pass: $ssh_password
          first_ssh: pkill -f node
          scp: |
            '.' => /home/centos/demeter/
          last_ssh: npm start
      
